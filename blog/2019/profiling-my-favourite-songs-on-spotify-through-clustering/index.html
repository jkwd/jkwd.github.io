<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Profiling my favourite songs on Spotify through clustering | John Koh </title> <meta name="author" content="John Koh"> <meta name="description" content="Personal data science EDA project"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/assets/css/scholar-icons.css?62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?6b8f493672acdc2dec9dd24ea9f5b855" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/jk.ico?17701e4c193bcbbeb8562ecc8617eb58"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://jkwd.github.io/blog/2019/profiling-my-favourite-songs-on-spotify-through-clustering/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> </head> <body class="fixed-top-nav sticky-bottom-footer"> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">John</span> Koh </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/"> </a> </li> <li class="nav-item active"> <a class="nav-link" href="/index.html">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/about/">About </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Profiling my favourite songs on Spotify through clustering</h1> <p class="post-meta"> Created on February 17, 2019 </p> <p class="post-tags"> <a href="/blog/2019"> <i class="fa-solid fa-calendar fa-sm"></i> 2019 </a>   ·   <a href="/blog/tag/data-science"> <i class="fa-solid fa-hashtag fa-sm"></i> data_science</a>   <a href="/blog/tag/eda"> <i class="fa-solid fa-hashtag fa-sm"></i> eda</a>   <a href="/blog/tag/clustering"> <i class="fa-solid fa-hashtag fa-sm"></i> clustering</a>   ·   <a href="/blog/category/project"> <i class="fa-solid fa-tag fa-sm"></i> project</a> </p> </header> <article class="post-content"> <div id="markdown-content"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2019-02-17-profiling-my-favourite-songs-on-spotify-through-clustering/1-480.webp 480w,/assets/img/2019-02-17-profiling-my-favourite-songs-on-spotify-through-clustering/1-800.webp 800w,/assets/img/2019-02-17-profiling-my-favourite-songs-on-spotify-through-clustering/1-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/2019-02-17-profiling-my-favourite-songs-on-spotify-through-clustering/1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p>Music plays an integral part of most of our lives. It is the common language that helps us express ourselves when no words could describe how we feel. Music also helps us set the mood. It affects our soul and our emotion, making us feel happy, sad or energetic. We will probably be playing songs to sing along during our long drives, or listening to upbeat songs during our gym sessions.</p> <p>Many of us have specific tastes in the music we listen to and it may change from time to time. This got me thinking…</p> <p>Have my taste in music changed over the years? If so, when did the changes occur? Based on my recent taste in music, what type(s) of music am I listening to now? Thanks to Spotify API, I am able to extract and explore the songs I enjoy listening to — the ones that made me click that heart icon.</p> <h2 id="setup">Setup</h2> <p>To get the data from the Spotify API, we will need to do an initial setup with the following steps:</p> <ol> <li>Login to <a href="https://developer.spotify.com/" rel="external nofollow noopener" target="_blank">Spotify for Developers</a> and create an app.</li> <li>From the application dashboard page, select edit settings and set Redirect URIs as <code class="language-plaintext highlighter-rouge">http://localhost:8888</code>.</li> <li>Take note of the Client ID and the Client Secret.</li> </ol> <h2 id="gathering-data">Gathering data</h2> <p>We can use <a href="https://spotipy.readthedocs.io/en/latest/" rel="external nofollow noopener" target="_blank">Spotipy</a>, a Python library for the Spotify Web API, to get the relevant data. To get the songs, we need to generate an authorization token.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">spotipy</span>
<span class="kn">import</span> <span class="n">spotipy.util</span> <span class="k">as</span> <span class="n">util</span>
<span class="kn">from</span> <span class="n">spotipy.oauth2</span> <span class="kn">import</span> <span class="n">SpotifyClientCredentials</span>
<span class="n">cid</span> <span class="o">=</span> <span class="sh">'</span><span class="s">&lt;INSERT CLIENT ID&gt;</span><span class="sh">'</span>
<span class="n">secret</span> <span class="o">=</span> <span class="sh">'</span><span class="s">&lt;INSERT CLIENT SECRET&gt;</span><span class="sh">'</span>
<span class="n">username</span> <span class="o">=</span> <span class="sh">""</span>
<span class="n">client_credentials_manager</span> <span class="o">=</span> <span class="nc">SpotifyClientCredentials</span><span class="p">(</span><span class="n">client_id</span><span class="o">=</span><span class="n">cid</span><span class="p">,</span> <span class="n">client_secret</span><span class="o">=</span><span class="n">secret</span><span class="p">)</span>
<span class="n">sp</span> <span class="o">=</span> <span class="n">spotipy</span><span class="p">.</span><span class="nc">Spotify</span><span class="p">(</span><span class="n">client_credentials_manager</span><span class="o">=</span><span class="n">client_credentials_manager</span><span class="p">)</span>
<span class="c1"># Get read access to your library
</span><span class="n">scope</span> <span class="o">=</span> <span class="sh">'</span><span class="s">user-library-read</span><span class="sh">'</span>
<span class="n">token</span> <span class="o">=</span> <span class="n">util</span><span class="p">.</span><span class="nf">prompt_for_user_token</span><span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">scope</span><span class="p">)</span>
<span class="k">if</span> <span class="n">token</span><span class="p">:</span>
    <span class="n">sp</span> <span class="o">=</span> <span class="n">spotipy</span><span class="p">.</span><span class="nc">Spotify</span><span class="p">(</span><span class="n">auth</span><span class="o">=</span><span class="n">token</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">Can</span><span class="sh">'</span><span class="s">t get token for</span><span class="sh">"</span><span class="p">,</span> <span class="n">username</span><span class="p">)</span>
</code></pre></div></div> <p>There are two APIs, current_user_saved_tracks and audio_features, to get the title, artist, time song was added, and features such as acousticness, danceability and instrumentalness. These features will help us in understanding our playlist better.</p> <p>Some of the description to the features are in the table below:</p> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2019-02-17-profiling-my-favourite-songs-on-spotify-through-clustering/2-480.webp 480w,/assets/img/2019-02-17-profiling-my-favourite-songs-on-spotify-through-clustering/2-800.webp 800w,/assets/img/2019-02-17-profiling-my-favourite-songs-on-spotify-through-clustering/2-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/2019-02-17-profiling-my-favourite-songs-on-spotify-through-clustering/2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p>To view the full features of a song, you may view this <a href="https://developer.spotify.com/documentation/web-api/reference/get-audio-features" rel="external nofollow noopener" target="_blank">link</a>.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df_saved_tracks</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nc">DataFrame</span><span class="p">()</span>
<span class="n">track_list</span> <span class="o">=</span> <span class="sh">''</span>
<span class="n">added_ts_list</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">artist_list</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">title_list</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">more_songs</span> <span class="o">=</span> <span class="bp">True</span>
<span class="n">offset_index</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">while</span> <span class="n">more_songs</span><span class="p">:</span>
    <span class="n">songs</span> <span class="o">=</span> <span class="n">sp</span><span class="p">.</span><span class="nf">current_user_saved_tracks</span><span class="p">(</span><span class="n">offset</span><span class="o">=</span><span class="n">offset_index</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">song</span> <span class="ow">in</span> <span class="n">songs</span><span class="p">[</span><span class="sh">'</span><span class="s">items</span><span class="sh">'</span><span class="p">]:</span>
        <span class="c1">#join track ids to a string for audio_features function
</span>        <span class="n">track_list</span> <span class="o">+=</span> <span class="n">song</span><span class="p">[</span><span class="sh">'</span><span class="s">track</span><span class="sh">'</span><span class="p">][</span><span class="sh">'</span><span class="s">id</span><span class="sh">'</span><span class="p">]</span> <span class="o">+</span><span class="sh">'</span><span class="s">,</span><span class="sh">'</span>
        <span class="c1">#get the time when the song was added
</span>        <span class="n">added_ts_list</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">song</span><span class="p">[</span><span class="sh">'</span><span class="s">added_at</span><span class="sh">'</span><span class="p">])</span>
        <span class="c1">#get the title of the song
</span>        <span class="n">title_list</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">song</span><span class="p">[</span><span class="sh">'</span><span class="s">track</span><span class="sh">'</span><span class="p">][</span><span class="sh">'</span><span class="s">name</span><span class="sh">'</span><span class="p">])</span>
        <span class="c1">#get all the artists in the song
</span>        <span class="n">artists</span> <span class="o">=</span> <span class="n">song</span><span class="p">[</span><span class="sh">'</span><span class="s">track</span><span class="sh">'</span><span class="p">][</span><span class="sh">'</span><span class="s">artists</span><span class="sh">'</span><span class="p">]</span>
        <span class="n">artists_name</span> <span class="o">=</span> <span class="sh">''</span>
        <span class="k">for</span> <span class="n">artist</span> <span class="ow">in</span> <span class="n">artists</span><span class="p">:</span>
            <span class="n">artists_name</span> <span class="o">+=</span> <span class="n">artist</span><span class="p">[</span><span class="sh">'</span><span class="s">name</span><span class="sh">'</span><span class="p">]</span>  <span class="o">+</span> <span class="sh">'</span><span class="s">,</span><span class="sh">'</span>
        <span class="n">artist_list</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">artists_name</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
    <span class="c1">#get the track features and append into a dataframe
</span>    <span class="n">track_features</span> <span class="o">=</span> <span class="n">sp</span><span class="p">.</span><span class="nf">audio_features</span><span class="p">(</span><span class="n">track_list</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">df_temp</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nc">DataFrame</span><span class="p">(</span><span class="n">track_features</span><span class="p">)</span>
    <span class="n">df_saved_tracks</span> <span class="o">=</span> <span class="n">df_saved_tracks</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">df_temp</span><span class="p">)</span>
    <span class="n">track_list</span> <span class="o">=</span> <span class="sh">''</span>
    <span class="k">if</span> <span class="n">songs</span><span class="p">[</span><span class="sh">'</span><span class="s">next</span><span class="sh">'</span><span class="p">]</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
        <span class="c1"># no more songs in playlist
</span>        <span class="n">more_songs</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># get the next n songs
</span>        <span class="n">offset_index</span> <span class="o">+=</span> <span class="n">songs</span><span class="p">[</span><span class="sh">'</span><span class="s">limit</span><span class="sh">'</span><span class="p">]</span>
<span class="c1">#include timestamp added, title and artists of a song
</span><span class="n">df_saved_tracks</span><span class="p">[</span><span class="sh">'</span><span class="s">added_at</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">added_ts_list</span>
<span class="n">df_saved_tracks</span><span class="p">[</span><span class="sh">'</span><span class="s">song_title</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">title_list</span>
<span class="n">df_saved_tracks</span><span class="p">[</span><span class="sh">'</span><span class="s">artists</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">artist_list</span>
</code></pre></div></div> <p>Here is a sample of the data set obtained.</p> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2019-02-17-profiling-my-favourite-songs-on-spotify-through-clustering/3-480.webp 480w,/assets/img/2019-02-17-profiling-my-favourite-songs-on-spotify-through-clustering/3-800.webp 800w,/assets/img/2019-02-17-profiling-my-favourite-songs-on-spotify-through-clustering/3-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/2019-02-17-profiling-my-favourite-songs-on-spotify-through-clustering/3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <h2 id="did-my-taste-in-music-change">Did my taste in music change?</h2> <p>After obtaining the data, it is time to find out how the features change across time. We can group the songs by its added year and month, get the average for each feature over time and visualize it.</p> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2019-02-17-profiling-my-favourite-songs-on-spotify-through-clustering/4-480.webp 480w,/assets/img/2019-02-17-profiling-my-favourite-songs-on-spotify-through-clustering/4-800.webp 800w,/assets/img/2019-02-17-profiling-my-favourite-songs-on-spotify-through-clustering/4-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/2019-02-17-profiling-my-favourite-songs-on-spotify-through-clustering/4.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p>The line graph was separated by year to make it more bite-size. Speechiness (in violet) is the most stable closer to 0 across the years. This indicates that I generally listen to songs which are less rap. Acousticness (in blue) is fluctuating which means that I have a mix of acoustic and non-acoustic songs over time.</p> <p>What interests me the most was instrumentalness (in green). For the year of 2015 and 2016, it was stable closer to 0. However, from 2017 onward, instrumentalness started to fluctuate. This is probably the indication that my music taste changed from 2017. We can filter our data to songs which were added from 2017.</p> <h2 id="what-types-of-songs-am-i-listening-to">What types of songs am I listening to?</h2> <h3 id="clustering">Clustering</h3> <p>Based on the chart above, I know that I am listening to more instrumental songs. But is it instrumental dance kind of songs? Or more classical songs? What about the others? What is my current taste in music? We could group songs with similar characteristics together, and profile each cluster. One type of clustering method is <a href="https://en.wikipedia.org/wiki/K-means_clustering" rel="external nofollow noopener" target="_blank">K-means Clustering</a> which is what I will be using to analyse my songs.</p> <p>For clustering, we want the points in the same cluster to be as close as possible. We also want the distance between clusters to be far from each other as possible. This makes each cluster look compact while being spaced out from each other.</p> <p>Here is a visualization of what clustering looks like for 4 clusters. The green dot represents each cluster centroid (centre of the cluster).</p> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2019-02-17-profiling-my-favourite-songs-on-spotify-through-clustering/5.gif" sizes="95vw"></source> <img src="/assets/img/2019-02-17-profiling-my-favourite-songs-on-spotify-through-clustering/5.gif" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> <figcaption class="caption">K-means clustering taken from http://shabal.in/visuals/kmeans/6.html</figcaption> </figure> <p>Because clustering relies on distance, the scale of our data will affect the results. For example, if we want to cluster by height, from 1.5m to 1.9m, and weight, from 60kg to 80kg. Thus, the points spreads across the height axis by 0.4 and the weight by 20. This means that weight will be dominant in determining the clusters.</p> <p>We can standardize the range of the data such that the features will influence the result.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">cluster_features</span> <span class="o">=</span> <span class="p">[</span><span class="sh">'</span><span class="s">acousticness</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">danceability</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">instrumentalness</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">energy</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">speechiness</span><span class="sh">'</span><span class="p">]</span>
<span class="n">df_cluster</span> <span class="o">=</span> <span class="n">df_recent</span><span class="p">[</span><span class="n">cluster_features</span><span class="p">]</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">array</span><span class="p">(</span><span class="n">df_cluster</span><span class="p">)</span>
<span class="n">scaler</span> <span class="o">=</span> <span class="nc">StandardScaler</span><span class="p">()</span>
<span class="n">scaler</span><span class="p">.</span><span class="nf">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">scaler</span><span class="p">.</span><span class="nf">transform</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</code></pre></div></div> <p>After getting an idea of what clustering does, how many types/groups of songs do we listen to? One way is to make an educated guess based on your own knowledge. If you listen to all types of music from edm to hip hop to jazz and many more, you can give a higher number like… 7 maybe? Because K-means clustering requires us to specify the number of clusters we want, we can set k=7, where k is the number of clusters.</p> <p>Another way is to use the help of the elbow method to determine the number of clusters. In the elbow method, we can perform clustering for a range of set cluster numbers, e.g. k=1, k=2, …, k=9, k=10. For each k, we will take each point and measure its squared distance to their cluster centroid, and sum them up. This is called the sum of squared distances (SSD). SSD measures how close each points are to the cluster centroid. Therefore, the smaller the SSD, the closer the points in the same cluster are.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ss_dist</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">K</span> <span class="o">=</span> <span class="nf">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">)</span>
<span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">K</span><span class="p">:</span>
    <span class="n">km</span> <span class="o">=</span> <span class="nc">KMeans</span><span class="p">(</span><span class="n">n_clusters</span><span class="o">=</span><span class="n">k</span><span class="p">,</span> <span class="n">init</span><span class="o">=</span><span class="sh">'</span><span class="s">k-means++</span><span class="sh">'</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">123</span><span class="p">)</span>
    <span class="n">km</span> <span class="o">=</span> <span class="n">km</span><span class="p">.</span><span class="nf">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
    <span class="n">ss_dist</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">km</span><span class="p">.</span><span class="n">inertia_</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">plot</span><span class="p">(</span><span class="n">K</span><span class="p">,</span> <span class="n">ss_dist</span><span class="p">,</span> <span class="sh">'</span><span class="s">bx-</span><span class="sh">'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">xlabel</span><span class="p">(</span><span class="sh">'</span><span class="s">k</span><span class="sh">'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">ylabel</span><span class="p">(</span><span class="sh">'</span><span class="s">Sum of squared distances</span><span class="sh">'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">title</span><span class="p">(</span><span class="sh">'</span><span class="s">Elbow Method For Optimal k</span><span class="sh">'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">show</span><span class="p">()</span>
</code></pre></div></div> <p>So if we plot the SSD for each k we will get curved line as shown below:</p> <div class="col-sm-9 mx-auto"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2019-02-17-profiling-my-favourite-songs-on-spotify-through-clustering/6-480.webp 480w,/assets/img/2019-02-17-profiling-my-favourite-songs-on-spotify-through-clustering/6-800.webp 800w,/assets/img/2019-02-17-profiling-my-favourite-songs-on-spotify-through-clustering/6-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/2019-02-17-profiling-my-favourite-songs-on-spotify-through-clustering/6.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <p>From the plot above, as k increases, SSD decreases. This is makes sense because points may have a closer cluster to be assigned to, resulting in a lower SSD.</p> <p>Earlier, I mentioned that we want the points in each cluster to be as close as possible. However, we cannot choose k=10 because it is the lowest. Imagine this. If we choose k=N, where N is the number of songs, we are having each song as its own cluster and thus SSD will be 0. This is because the cluster centroid of each point is the point itself.</p> <p>Instead, we are going to choose k such that if we add another cluster, SSD decreases slightly. This is known as the elbow method. If we think of the curve as our arm, we get a steep slope at the beginning which suddenly becomes gentle midway. This gives it its “elbow” shape.</p> <p>Based on the elbow method, the number of clusters recommended is 4 because the line became gentle from k=4 to k=5. However, I’ve also played around with k=5 and found that I like the clusters given. Therefore, in this post I will be sharing the results I got for k=5 instead.</p> <h2 id="cluster-visualization">Cluster Visualization</h2> <p>Great we finally have our cluster! So how does our cluster look like? Unfortunately, at this we are unable to view it yet. This is because our clusters are formed using 5 features. If you think of each feature as a dimension, you get 5-D. As we can view images up to 3-D, we will need to perform a technique called <a href="https://en.wikipedia.org/wiki/Dimensionality_reduction" rel="external nofollow noopener" target="_blank">dimension reduction</a>. This allows us to reduce from 5-D to any dimensions lower.</p> <p>To try and explain it as intuitively as possible, dimension reduction aims to make a low dimensional set of features from a higher dimension while preserving as much information as possible. If you wish to get a better understanding of what it does you may watch this <a href="https://www.youtube.com/watch?v=FgakZw6K1QQ" rel="external nofollow noopener" target="_blank">video</a> about Principal Component Analysis(PCA), which is one of the methods in dimension reduction.</p> <p>Let’s see how much data is preserved if we use PCA to reduce the dimension.</p> <div class="col-sm-9 mx-auto"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2019-02-17-profiling-my-favourite-songs-on-spotify-through-clustering/7-480.webp 480w,/assets/img/2019-02-17-profiling-my-favourite-songs-on-spotify-through-clustering/7-800.webp 800w,/assets/img/2019-02-17-profiling-my-favourite-songs-on-spotify-through-clustering/7-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/2019-02-17-profiling-my-favourite-songs-on-spotify-through-clustering/7.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <p>The blue bar shows how much information each principal component (PC) contributes to the data. The first PC contributes 40% of information about the data. The second and third contributes 20% each. The red line shows the cumulative information of the data by the PCs. By reducing from 5 dimensions to 2, 60% information of the data is preserved. Likewise if we were to reduce to 3 dimensions, 80% information of the data is preserved.</p> <p>Now let’s see how our clusters look like on a 2-D and 3-D scatter plot.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2019-02-17-profiling-my-favourite-songs-on-spotify-through-clustering/8-480.webp 480w,/assets/img/2019-02-17-profiling-my-favourite-songs-on-spotify-through-clustering/8-800.webp 800w,/assets/img/2019-02-17-profiling-my-favourite-songs-on-spotify-through-clustering/8-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/2019-02-17-profiling-my-favourite-songs-on-spotify-through-clustering/8.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2019-02-17-profiling-my-favourite-songs-on-spotify-through-clustering/9-480.webp 480w,/assets/img/2019-02-17-profiling-my-favourite-songs-on-spotify-through-clustering/9-800.webp 800w,/assets/img/2019-02-17-profiling-my-favourite-songs-on-spotify-through-clustering/9-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/2019-02-17-profiling-my-favourite-songs-on-spotify-through-clustering/9.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>The points in the 2-D scatter plot overlaps with each other and may not look like the clustering was done well. However if we were to view it from a 3-D perspective, we can see the clusters better.</p> <p>Let’s try another method called t-Distributed Stochastic Neighbor Embedding(t-SNE). t-SNE performs well for visualizing high dimension data. For more details, you may read this <a href="https://www.datacamp.com/tutorial/introduction-t-sne" rel="external nofollow noopener" target="_blank">tutorial</a> by datacamp.</p> <div class="col-sm-9 mx-auto"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2019-02-17-profiling-my-favourite-songs-on-spotify-through-clustering/10-480.webp 480w,/assets/img/2019-02-17-profiling-my-favourite-songs-on-spotify-through-clustering/10-800.webp 800w,/assets/img/2019-02-17-profiling-my-favourite-songs-on-spotify-through-clustering/10-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/2019-02-17-profiling-my-favourite-songs-on-spotify-through-clustering/10.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <p>In this case, a 2-D t-SNE scatter plot is able to visualize the 5 clusters nicely. We can also roughly tell that cluster 3 is the biggest cluster and cluster 0 or 1 is the smallest. Let’s see how the clusters are distributed using a bar chart.</p> <div class="col-sm-9 mx-auto"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2019-02-17-profiling-my-favourite-songs-on-spotify-through-clustering/11-480.webp 480w,/assets/img/2019-02-17-profiling-my-favourite-songs-on-spotify-through-clustering/11-800.webp 800w,/assets/img/2019-02-17-profiling-my-favourite-songs-on-spotify-through-clustering/11-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/2019-02-17-profiling-my-favourite-songs-on-spotify-through-clustering/11.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <h2 id="cluster-profiling">Cluster Profiling</h2> <p>Now, we can make sense of what the characteristics of the different clusters are. Let’s compare the distribution of features across clusters.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># set binning intervals of 0.1
</span><span class="n">bins</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="c1"># create subplots for number of clusters(Rows) and features(Cols)
</span><span class="n">num_features</span> <span class="o">=</span> <span class="nf">len</span><span class="p">(</span><span class="n">cluster_features</span><span class="p">)</span>
<span class="n">f</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="nf">subplots</span><span class="p">(</span><span class="n">num_clusters</span><span class="p">,</span> <span class="n">num_features</span><span class="p">,</span>
                       <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="n">sharex</span><span class="o">=</span><span class="sh">'</span><span class="s">col</span><span class="sh">'</span>
<span class="n">row</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">cluster</span> <span class="ow">in</span> <span class="n">np</span><span class="p">.</span><span class="nf">sort</span><span class="p">(</span><span class="n">df_recent</span><span class="p">[</span><span class="sh">'</span><span class="s">cluster</span><span class="sh">'</span><span class="p">].</span><span class="nf">unique</span><span class="p">()):</span>
    <span class="n">df_cluster</span> <span class="o">=</span> <span class="n">df_recent</span><span class="p">[</span><span class="n">df_recent</span><span class="p">[</span><span class="sh">'</span><span class="s">cluster</span><span class="sh">'</span><span class="p">]</span> <span class="o">==</span> <span class="n">cluster</span><span class="p">]</span>
    <span class="n">col</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">feature</span> <span class="ow">in</span> <span class="n">cluster_features</span><span class="p">:</span>
        <span class="n">rec_grp</span> <span class="o">=</span> <span class="n">df_recent</span><span class="p">.</span><span class="nf">groupby</span><span class="p">(</span><span class="n">pd</span><span class="p">.</span><span class="nf">cut</span><span class="p">(</span><span class="n">df_recent</span><span class="p">[</span><span class="n">feature</span><span class="p">],</span> <span class="n">bins</span><span class="p">)).</span><span class="nf">size</span><span class="p">().</span><span class="nf">reset_index</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="sh">'</span><span class="s">count</span><span class="sh">'</span><span class="p">)</span>
        <span class="n">cluster_grp</span> <span class="o">=</span> <span class="n">df_cluster</span><span class="p">.</span><span class="nf">groupby</span><span class="p">(</span><span class="n">pd</span><span class="p">.</span><span class="nf">cut</span><span class="p">(</span><span class="n">df_cluster</span><span class="p">[</span><span class="n">feature</span><span class="p">],</span> <span class="n">bins</span><span class="p">)).</span><span class="nf">size</span><span class="p">().</span><span class="nf">reset_index</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="sh">'</span><span class="s">count</span><span class="sh">'</span><span class="p">)</span>

        <span class="n">sns</span><span class="p">.</span><span class="nf">barplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">rec_grp</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">feature</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="sh">'</span><span class="s">count</span><span class="sh">'</span><span class="p">,</span>
                    <span class="n">color</span><span class="o">=</span><span class="sh">'</span><span class="s">grey</span><span class="sh">'</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">])</span>
        <span class="n">sns</span><span class="p">.</span><span class="nf">barplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">cluster_grp</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">feature</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="sh">'</span><span class="s">count</span><span class="sh">'</span><span class="p">,</span>
                    <span class="n">color</span><span class="o">=</span><span class="sh">'</span><span class="s">red</span><span class="sh">'</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">])</span>
        <span class="n">axes</span><span class="p">[</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">].</span><span class="nf">set_xlabel</span><span class="p">(</span><span class="sh">''</span><span class="p">)</span>
        <span class="n">axes</span><span class="p">[</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">].</span><span class="nf">set_xticklabels</span><span class="p">(</span><span class="nf">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">col</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">axes</span><span class="p">[</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">].</span><span class="nf">set_ylabel</span><span class="p">(</span><span class="sh">''</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">row</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">axes</span><span class="p">[</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">].</span><span class="nf">set_title</span><span class="p">(</span><span class="n">feature</span><span class="p">)</span>
        <span class="n">col</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="n">f</span><span class="p">.</span><span class="nf">suptitle</span><span class="p">(</span><span class="sh">'</span><span class="s">Profile for each clusters</span><span class="sh">'</span><span class="p">)</span>

<span class="n">plt</span><span class="p">.</span><span class="nf">show</span><span class="p">()</span>
</code></pre></div></div> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2019-02-17-profiling-my-favourite-songs-on-spotify-through-clustering/12-480.webp 480w,/assets/img/2019-02-17-profiling-my-favourite-songs-on-spotify-through-clustering/12-800.webp 800w,/assets/img/2019-02-17-profiling-my-favourite-songs-on-spotify-through-clustering/12-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/2019-02-17-profiling-my-favourite-songs-on-spotify-through-clustering/12.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p>Each Row represents the cluster, 0 to 4, and the each Column represents the feature. The grey bar represents the distribution of the feature. This allows us to get a rough idea of the distribution of the feature. The red bar represents the distribution of the feature in that cluster which is used to compare against the other clusters.</p> <p>When we look at the distribution of each cluster we can see that each cluster is high or low in certain features. This is identified by whether the red bar is on the right(high) or left(low) with respect to the grey bar. From these characteristics we can profile them and even come up with a cluster identity.</p> <p>Cluster 0 (Instrumental): High instrumentalness. Low speechiness.</p> <p>Cluster 1 (Lyrical): High danceability, energy, speechiness. Low acousticness, instrumentalness.</p> <p>Cluster 2 (Chill vibes): High danceability. Low energy, instrumentalness, speechiness.</p> <p>Cluster 3 (Dance): High danceability, energy. Low acousticness, instrumentalness, speechiness.</p> <p>Cluster 4 (Wind down): High acousticness. Low danceability, instrumnetalness, energy, speechiness.</p> <p>We can also profile by taking the average of the cluster feature and plotting them onto a radar chart. This might be easier to view the differences between all the cluster at a glance.</p> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2019-02-17-profiling-my-favourite-songs-on-spotify-through-clustering/13-480.webp 480w,/assets/img/2019-02-17-profiling-my-favourite-songs-on-spotify-through-clustering/13-800.webp 800w,/assets/img/2019-02-17-profiling-my-favourite-songs-on-spotify-through-clustering/13-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/2019-02-17-profiling-my-favourite-songs-on-spotify-through-clustering/13.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2019-02-17-profiling-my-favourite-songs-on-spotify-through-clustering/14-480.webp 480w,/assets/img/2019-02-17-profiling-my-favourite-songs-on-spotify-through-clustering/14-800.webp 800w,/assets/img/2019-02-17-profiling-my-favourite-songs-on-spotify-through-clustering/14-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/2019-02-17-profiling-my-favourite-songs-on-spotify-through-clustering/14.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p>The readings of the radar chart is similar to the profile given above. We can also see that cluster 2 and 4 have a similar stats. The difference is that cluster 2 is more focused on danceability and cluster 4 is more focused on acousticness.</p> <h2 id="cluster-sample">Cluster sample</h2> <p>Let’s see if the songs in each cluster fits the cluster profile. Here are 3 songs in each cluster and you can give it a listen and see if it makes sense:</p> <h3 id="cluster-0-instrumental">Cluster 0 (Instrumental)</h3> <ul> <li>Go Back Home by FKJ</li> <li>Hypnotised by Coldplay</li> <li>Libertango by Astor Piazzolla, Bond</li> </ul> <h3 id="cluster-1-lyrical">Cluster 1 (Lyrical)</h3> <ul> <li>September Rose by Cailin Russo</li> <li>Candlelight by Zhavia Ward</li> <li>BBIBBI by IU</li> </ul> <h3 id="cluster-2-chill-vibes">Cluster 2 (Chill vibes)</h3> <ul> <li>Drop the Game by Flume, Chet Faker</li> <li>Livid by ELIZA</li> <li>Find a Way by Matt Quentin, Rinca Yang</li> </ul> <h3 id="cluster-3-dance">Cluster 3 (Dance)</h3> <ul> <li>Ultralife by Oh Wonder</li> <li>Little Man by The Pb Underground</li> <li>Finesse (Remix) [feat. Cardi B] by Bruno Mars,Cardi B</li> </ul> <h3 id="cluster-4-wind-down">Cluster 4 (Wind down)</h3> <ul> <li>Frozen by Sabrina Claudio</li> <li>Break the Distance 2.0 by Ashton Edminster</li> <li>Someone To Stay by Vancouver Sleep Clinic</li> </ul> <h2 id="conclusion">Conclusion</h2> <p>We first looked at the different features over time and try to figure out if there was a shift in music taste. From the filtered data set, we performed our cluster analysis. We then visualized to get a rough idea of what it looks like and to ensure that the clustering is fine. Finally we plotted the distribution of each feature and profiled them. At the end of the day, we are able to get a better understanding of the type of songs that we like.</p> <p>The collection of data can be found <a href="https://github.com/jkwd/spotify/blob/master/Code/Spotify%20Get%20Data.ipynb" rel="external nofollow noopener" target="_blank">here</a> and the analysis can be found <a href="https://github.com/jkwd/spotify/blob/master/Code/Favourite%20songs%20EDA.ipynb" rel="external nofollow noopener" target="_blank">here</a> on my Github.</p> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h1 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h1> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/chess-de-project/">Chess DE Project</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/full-vs-incremental-load/">Full vs incremental load</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/oltp-vs-olap/">Benchmarking OLTP vs OLAP</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/github-actions/">Github Actions Tutorial</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/terraform-notes/">Terraform Tutorial</a> </li> </div> </div> <footer class="sticky-bottom mt-5" role="contentinfo"> <div class="container"> © Copyright 2025 John Koh. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js?a0db7e5d5c70cc3252b3138b0c91dcaf" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/assets/js/mathjax-setup.js?a5bb4e6a542c546dd929b24b8b236dfd"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=G-57NGLGRVZL"></script> <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
      dataLayer.push(arguments);
    }
    gtag('js', new Date());

    gtag('config', 'G-57NGLGRVZL');
  </script> <script defer src="/assets/js/google-analytics-setup.js?12374742c4b1801ba82226e617af7e2d"></script> <script defer src="/assets/js/progress-bar.js?2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> </body> </html>